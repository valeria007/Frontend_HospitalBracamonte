<!DOCTYPE html>
<html lang="es">

<head>
	<link rel="icon" type="image/png" sizes="16x16" href="/images/gfu.png">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Administrador</title>
	<meta charset="UTF-8">
	<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


	<link href="/css/font-awesome.css" rel="stylesheet" type="text/css" />
	<link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
	<link href="/css/animate.css" rel="stylesheet" type="text/css" />
	<link href="/css/admin.css" rel="stylesheet" type="text/css" />
	<link href="/plugins/data-tables/DT_bootstrap.css" rel="stylesheet">
	<link href="/plugins/advanced-datatable/css/demo_table.css" rel="stylesheet">
	<link href="/plugins/advanced-datatable/css/demo_page.css" rel="stylesheet">
<!--validaciones-->

<link href="/plugins/toggle-switch/toggles.css" rel="stylesheet" type="text/css" />
<link href="/plugins/checkbox/icheck.css" rel="stylesheet" type="text/css" />
<link href="/plugins/checkbox/minimal/blue.css" rel="stylesheet" type="text/css" />
<link href="/plugins/checkbox/minimal/green.css" rel="stylesheet" type="text/css" />
<link href="/plugins/checkbox/minimal/grey.css" rel="stylesheet" type="text/css" />
<link href="/plugins/checkbox/minimal/orange.css" rel="stylesheet" type="text/css" />
<link href="/plugins/checkbox/minimal/pink.css" rel="stylesheet" type="text/css" />
<link href="/plugins/checkbox/minimal/purple.css" rel="stylesheet" type="text/css" />
<link href="/plugins/bootstrap-fileupload/bootstrap-fileupload.min.css" rel="stylesheet">
<link href="/plugins/dropzone/dropzone.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="/plugins/bootstrap-datepicker/css/datepicker.css" />
<link rel="stylesheet" type="text/css" href="/plugins/bootstrap-timepicker/compiled/timepicker.css" />
<link rel="stylesheet" type="text/css" href="/plugins/bootstrap-colorpicker/css/colorpicker.css" />

<link rel="stylesheet" href="/sweetalert2/dist/sweetalert2.min.css">


	<style>
		div.a {
			text-align: center;
		}

		h1.letras {
			font: italic normal 400 16px/22px Arial, Verdana, Sans-serif;

		}
    .vertical-alignment-helper {
      display:table;
      height: 100%;
      margin-left: 41%;
    }
    .vertical-align-center {
      /* To center vertically */
      display: table-cell;
      vertical-align: middle;
      text-align: center;
    }
	</style>

</head>
<script type="text/javascript">
	// este scrip es para verificar si esta el token en local starge
	var data = localStorage.getItem('data')
	console.log(data)
	if (data == null){
		window.location.replace('/')
  }
  function delete_local_storage(){
		console.log ("ssss")
		localStorage.removeItem('data');
		localStorage.removeItem('url');
  }
  setTimeout(()=>{
    delete_local_storage()
    //window.location.replace('/')
  },500000);
</script>

<body class="light_theme  fixed_header left_nav_fixed">
	<div class="wrapper" id="cuentarole">
		<div class="header_bar">
			<!--\\\\\\\ header Start \\\\\\-->
			<div class="brand">
				<!--\\\\\\\ brand Start \\\\\\-->
				<div class="logo" style="display:block"><span class="theme_color">Hospital</div>

			</div>
			<!--\\\\\\\ brand end \\\\\\-->
			<div class="header_top_bar">
				<!--\\\\\\\ header top bar start \\\\\\-->
				<a href="javascript:void(0);" class="menutoggle"> <i class="fa fa-bars"></i> </a>

				<div class="top_right_bar">

					<div class="user_admin dropdown"> <a href="javascript:void(0);" data-toggle="dropdown"><img
								src="/images/admin.png" /><span class="user_adminname"><%=data_doc.data.personal.nombre%> <%=data_doc.data.personal.apellidop%></span> <b
								class="caret"></b> </a>
						<ul class="dropdown-menu">
							<div class="top_pointer"></div>
							<li> <a data-target="#myModalCerrar" data-toggle="modal"><i class="fa fa-power-off"></i> Salir</a> </li>
						</ul>
					</div>
				</div>
			</div>
			<!--\\\\\\\ header top bar end \\\\\\-->
		</div>
		<div class="inner">
			<div class="left_nav">
        <div class="left_nav_slidebar">
          <ul>
            <li ><a href="javascript:void(0);"><i class="fa fa-home"></i> Home <span class="plus"><i class="fa fa-plus"></i></span> </a>
              <ul >
                <li> <a href="/home/<%=data_doc.data.token_id%>"> <span>&nbsp;</span> <i class="fa fa-circle theme_color"></i> <b >Inicio</b> </a> </li>
              </ul>
            </li>
            <li class="left_nav_active theme_border"> <a href="javascript:void(0);"> <i class="fa fa-users icon"></i>Admin Usuarios<span class="left_nav_pointer"></span> <span class="plus"><i class="fa fa-plus"></i></span></a>
              <ul class="opened" style="display:block" >
                <li> <a href="/usuarios/usuarios/<%=data_doc.data.token_id%>"> <span>&nbsp;</span> <i class="fa fa-circle theme_color"></i> <b class="theme_color">Registros</b> </a> </li>
              </ul>
            </li>
            <li> <a href="javascript:void(0);"> <i class="fa fa-clipboard"></i>Servicios<span class="plus"><i class="fa fa-plus"></i></span></a>
              <ul>
                <li> <a href="/cuaderno/especialidad/<%=data_doc.data.token_id%>"> <span>&nbsp;</span> <i class="fa fa-circle"></i> <b>Especialidades</b> </a> </li>
                <li> <a href="/cuaderno/Cuadernos/<%=data_doc.data.token_id%>"> <span>&nbsp;</span> <i class="fa fa-circle"></i> <b>Cuadernos</b> </a> </li>
                <li> <a href="/salas/salas/<%=data_doc.data.token_id%>"> <span>&nbsp;</span> <i class="fa fa-circle"></i> <b>Salas</b> </a> </li>
              </ul>
            </li>
            <li> <a href="javascript:void(0);"> <i class="fa fa-folder-open-o"></i> Reportes <span class="plus"><i class="fa fa-plus"></i></span> </a>
              <ul>
                <li> <a href="/paciente_Inter/<%=data_doc.data.token_id%>"> <span>&nbsp;</span> <i class="fa fa-circle"></i> <b >Reporte de Pacientes</b> </a> </li>
                <li> <a href="/pacientead/<%=data_doc.data.token_id%>"> <span>&nbsp;</span> <i class="fa fa-circle"></i> <b >Reporte de Farmacia</b></a> </li>
                <li> <a href="/usuarios/roles1/<%=data_doc.data.token_id%>"> <span>&nbsp;</span> <i class="fa fa-circle"></i> <b >Reporte de Person.</b> </a> </li>
                <li> <a href="/cuaderno/recuadernos/<%=data_doc.data.token_id%>"> <span>&nbsp;</span> <i class="fa fa-circle"></i> <b >Reporte de Cuadr.</b> </a> </li>
                <li> <a href="/cuaderno/repespecialidad/<%=data_doc.data.token_id%>"> <span>&nbsp;</span> <i class="fa fa-circle"></i> <b>Reporte de Espc.</b> </a> </li>

              </ul>
            </li>
            <li> <a href="javascript:void(0);"> <i class="fa fa-cogs"></i>CFG del Sistema<span class="plus"><i class="fa fa-plus"></i></span></a>
              <ul>
                <li> <a href="/backup/<%=data_doc.data.token_id%>"> <span>&nbsp;</span> <i class="fa fa-circle"></i> <b>Backup</b> </a> </li>
                <li> <a href="/role/role/<%=data_doc.data.token_id%>"> <span>&nbsp;</span> <i class="fa fa-circle "></i> <b >Regs. Roles</b> </a> </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
			<div class="contentpanel">
				<div class="container clear_both padding_fix col-lg-8">
					<br>
					<div class="row">
            <div class="col-lg-12 ">
              <div id="main-content" class=" block-web">
								
                <div class="header">
                  <div class="info blue_symbols"><i class="fa fa-ticket icon"></i></div>
                  <h3 class="content-header ">Registro de Cuentas</h3>
                </div>
								<div class="page-content">
									<div class="row">
										<div class="col-md-12">
											<div class="block-web">
												<div class="header">
													<div class="actions"> 
                            <a class="minimize" data-toggle="collapse" data-target="#demo"><i class="fa fa-chevron-down" style="color: blue;"></i></a> 
                            <a class="refresh" href="/usuarios/quitar4/<%=id%>/<%=data_doc.data.token_id%>"><i class="fa fa-repeat" style="color: blue;"></i></a>
													</div>
												</div>
												<div class="porlets-contents">
                          <div id="demo" class="collapse in">
                            <%if (data == null) {%>
                            <form class="form-horizontal group-border-dashed" action="/usuarios/crearCuenta/<%=id%>/<%=data_doc.data.token_id%>" method="POST" parsley-validate novalidate>
                              <div class="form-group">
                                <div class="col-sm-5">
                                  <label class="control-label">Cuenta :</label>
                                  <input type="text"  class="form-control" parsley-trigger="change"  name="username" required placeholder="Introdusca Cuenta"  />
                                </div>
                                <div class="col-sm-5">
                                  <label class="control-label">Email :</label>
                                  <input type="email"  class="form-control" parsley-trigger="change" name="email"  required placeholder="Introdusca Correo" />
                                </div>
                              </div>
                              <div class="form-group">
                                <div class="col-sm-5">
                                  <label class="control-label">Contraseña :</label>
                                  <input type="password" id="pass1" name="password"  class="form-control" placeholder="Password"  parsley-trigger="change" required placeholder="Introdusca Contraseña" />
                                </div>
                                <div class="col-sm-5">
                                  <label class="control-label">Repita Contraseña :</label>
                                  <input type="password" parsley-equalto="#pass1" class="form-control" name="" parsley-trigger="change"   required placeholder="Repita Contraseña" />
                                </div>
                              </div>
                              <div class="form-group">
                                <div class="col-md-5">
                                  <button class="btn btn-success" type="submit"><i class="fa fa-floppy-o"></i><span>&nbsp;</span>Guardar</button>
                                  <a class="btn btn-info"href="/usuarios/quitar3/<%=data_doc.data.token_id%>"><i class="fa fa-reply"></i><span>&nbsp;</span>Volver</a>
                                </div>
                              </div>
                              
                            </form>
                            <% } else { %>
                            <form class="form-horizontal group-border-dashed" action="/usuarios/crearCuenta/<%=id%>/<%=data_doc.data.token_id%>" method="POST" parsley-validate novalidate>
                              <div class="form-group">
                                <div class="col-md-5">
                                  <label class="control-label">Cuenta :</label>
                                 <input type="text"  class="form-control" parsley-trigger="change" value="<%=data.data.username%>" name="username" required placeholder/>
                                </div>
                                <div class="col-md-5">
                                  <label class="control-label">Email:</label>
                                  <input type="text"  class="form-control" parsley-trigger="change" name="email" value="<%=data.data.email%>"required placeholder />
                                </div>
                              </div>
                              <div class="form-group">
                                <div class="col-md-5">
                                  <label class="control-label">Contraseña:</label>
                                  <input type="password" id="pass1" name="password"  class="form-control" placeholder="Password"  parsley-trigger="change" required placeholder />
                                </div>
                                <div class="col-md-5">
                                  <label class="control-label">Repita Contraseña:</label>
                                  <input type="password" parsley-equalto="#pass1" class="form-control" name="" parsley-trigger="change"   required placeholder/>
                                </div>
                              </div>
                              <div class="form-group">
                                <div class="col-md-5">
                                  <button class="btn btn-success" type="submit"><i class="fa fa-floppy-o"></i><span>&nbsp;</span>Guardar</button>
                                  <a class="btn btn-danger"href="/usuarios/quitar4/<%=id%>/<%=data_doc.data.token_id%>"><i class="fa fa-times"></i><span>&nbsp;</span>Cancelar</a>
                                </div>
                              </div>
                              
                            </form>
                            <% } %>
                          </div>
                          <br><br>
                          <div class="porlets-content">
                            <div class="table-responsive">
                              <table  class="display table table-bordered table-striped" id="dynamic-table">
                                <thead>
                                  <tr>
                                    <th class="text-center">Cuenta</th>
                                    <th class="text-center">Email</th>
                                    <th class="text-center">Opciones</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <% for (var i=0; i< resp.length; i++) { %>
                                  <tr>
                                    <td class="text-center"><%=resp[i].username %></td>
                                    <td class="text-center"><%=resp[i].email %></td>
                                    <td class="text-center">
                                      <a href="#!"  data-target="#myModal" data-toggle="modal" data-toggle="tooltip" class="btn  tooltips" data-original-title="Dar_Baja"><i class="fa fa-trash-o red"></i></a><span>&nbsp;</span>
                                      <a @click="id_data(<%=resp[i].id%>)" data-target="#myModal2" data-toggle="modal"  data-toggle="tooltip" class="btn  tooltips" data-original-title="Dar Rol"><i  class="fa fa-chain " style="color:black"></i></i></a><span>&nbsp;</span>
                                    </td>  
                                  </tr>
                                  <% } %>
                                </tbody>
                              </table>
                            </div>
                          </div>
                        </div>
												<!--/porlets-content-->
											</div>
											<!--/block-web-->
										</div>
										<!--/col-md-12-->
									</div>
									<!--/row-->
                </div>
								<!--/page-content end-->
							</div>
						</div>
          </div>
				</div>
		  </div>
    </div>
    <!--modal par mostrar datos-->
   
    <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="myModalLabel">Asignación de Roles</h4>
            <!--<div class="center">
              <span style="color: blue">{{msg}}</span>
              <span style="color: red">{{msg_false}}</span>
            </div>-->
          </div>
          <div class="modal-body"> 
            <form @submit="crear_rol" class="form-horizontal" parsley-validate novalidate>
              <div class="form-group">
                <label  class="col-sm-5 control-label">Asignación de Rol :</label>
                <div class="col-sm-4">
                  <select class="form-control" id="source" v-model="nomrol" >
                    <option value="">--Seleccione--</option>
                    <%for (var i = 0; i < list_role.length; i++) { %>
                      <option value="<%=list_role[i].name%>" class="text-center uppercase"><%=list_role[i].name%></option>
                    <% } %>
                   <!--  <option value="administrcion">ADMINISTRADOR</option>
                    <option value="medico">MÉDICO</option>
                    <option value="fichaje">FICHAJE</option>
                    <option value="Almacen">ALMACEN</option>
                    <option value="emergencia">EMERGENCIA</option>
                    <option value="farmacia">FARMACEUTICO</option>
                    <option value="hospitalizacion">HOSPITALIZACIÓN </option> -->
                  </select>
                </div>
              </div>
              <div class="form-group">
                <div class="col-md-5">
                  <button type="submit" class="btn btn-success "  ><i class="fa fa-floppy-o"></i><span>&nbsp;</span>Guardar </button>
                  <button type="reset"class="btn btn-danger " data-dismiss="modal"><i class="fa fa-times"></i><span>&nbsp;</span>Cancelar</button>
                </div>
              </div>
              
            </form>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="vertical-alignment-helper">
        <div class="modal-dialog vertical-align-center modal-sm ">
          <div class="modal-content">
            <br>
              <div class="center">
                <i  class="fa fa-exclamation-triangle red fa-6x"></i>
              </div>
              <div class="center">
                <h5><b>¿Estás seguro?</b></h5>
                <p>De dar baja al Cuenta...</p>
              </div>
            <div class="modal-footer">
              <div class="center">
                <a href=""  class="btn btn-success"><i class="fa fa-check"></i><span>&nbsp;</span>Sí, Confirmar</a>
                <button type="button" class="btn btn-danger" data-dismiss="modal"><i class="fa fa-times"></i><span>&nbsp;</span>No, Cancelar</button>
              </div>
            </div>
          </div>
        </div>
      </div> 
    </div>
    <div class="modal fade" id="myModalCerrar" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      
      <div class="vertical-alignment-helper">
        <div class="modal-dialog vertical-align-center modal-sm ">
          <div class="modal-content">
            <br>
              <div class="center">
                <i><img src="/images/salir.gif" width="100" height="100" /></i>
              </div>
              <div class="center">
                <h5><b>¿Cerrar Sesión?</b></h5>
              </div>
              <div class="modal-footer">
                <div class="center">
                  <a href="/delete_token/<%=data_doc.data.token_id%>" onclick="delete_local_storage()"  class="btn btn-success"><i class="fa fa-check"></i><span>&nbsp;</span>Sí, Confirmar</a>
                  <button type="button" class="btn btn-danger" data-dismiss="modal"><i class="fa fa-times"></i><span>&nbsp;</span>No, Cancelar</button>
                </div>
              </div>
          </div>
        </div>
      </div> 
    </div>
  
  </div>
<script>
  window.setTimeout(function() {
    $(".alert").fadeTo(500, 0).slideUp(500, function(){
      $(this).remove(); 
    });
 }, 2000);
 </script>
 <script>
  function mayus(e) {
  e.value = e.value.toUpperCase();
 }
</script>
	
<!--====== Scripts -->

<script src="/js/jquery-2.1.0.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/common-script.js"></script>
<script src="/js/jquery.slimscroll.min.js"></script>
<script src="/plugins/data-tables/jquery.dataTables.js"></script>
<script src="/plugins/data-tables/DT_bootstrap.js"></script>
<script src="/plugins/data-tables/dynamic_table_init.js"></script>
<script src="/plugins/data-tables/dynamic_table_init2.js"></script>
<script src="/plugins/edit-table/edit-table.js"></script>
<script>
	jQuery(document).ready(function () {
		EditableTable.init();
	});
</script>
<!--validaciones-->
<script type="text/javascript"  src="/plugins/toggle-switch/toggles.min.js"></script> 
<script src="/plugins/checkbox/zepto.js"></script>
<script src="/plugins/checkbox/icheck.js"></script>
<script src="/js/icheck-init.js"></script>
<script type="text/javascript" src="/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script> 
<script type="text/javascript" src="/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script> 
<script type="text/javascript" src="/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.js"></script> 
<script type="text/javascript" src="/plugins/bootstrap-timepicker/js/bootstrap-timepicker.js"></script> 
<script type="text/javascript" src="/js/form-components.js"></script> 
<script type="text/javascript"  src="/plugins/input-mask/jquery.inputmask.min.js"></script> 
<script type="text/javascript"  src="/plugins/input-mask/demo-mask.js"></script> 
<script type="text/javascript"  src="/plugins/bootstrap-fileupload/bootstrap-fileupload.min.js"></script> 
<script type="text/javascript"  src="/plugins/dropzone/dropzone.min.js"></script> 
<script type="text/javascript" src="/plugins/ckeditor/ckeditor.js"></script>

<script src="/sweetalert2/dist/sweetalert2.min.js"></script>


<script src="/plugins/validation/parsley.min.js"></script>

<script>


/*==Porlets Actions==*/
    $('.minimize').click(function(e){
      var h = $(this).parents(".header");
      var c = h.next('.porlets-content');
      var p = h.parent();
      
      c.slideToggle();
      
      p.toggleClass('closed');
      
      e.preventDefault();
    });
    
    $('.refresh').click(function(e){
      var h = $(this).parents(".header");
      var p = h.parent();
      var loading = $('&lt;div class="loading"&gt;&lt;i class="fa fa-refresh fa-spin"&gt;&lt;/i&gt;&lt;/div&gt;');
      
      loading.appendTo(p);
      loading.fadeIn();
      setTimeout(function() {
        loading.fadeOut();
      }, 1000);
      
      e.preventDefault();
    });
    
    $('.close-down').click(function(e){
      var h = $(this).parents(".header");
      var p = h.parent();
      
      p.fadeOut(function(){
        $(this).remove();
      });
      e.preventDefault();
    });

</script>
<script src="/url/export.js"></script>
<script src="/js/jPushMenu.js"></script> 
<script src="/js/side-chats.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>
<script src="/axios/dist/axios.min.js"></script>
<script src="/js/vue/cuentarole.js"></script>

<script>
  /*  <%if(msg1) { %> */
    /*  <%if(msg1.data.success == false) { %> */
         msg_false()
         function msg_false(){
           swal.fire(
             'Error!',
             '<label style="color:red;">'+`<%=msg1.data.data_p1%>`+'</label>',
             'error'
           )
         }
     /* <% } else {%> */
         msg_true()
         function msg_true(){
           swal.fire(
             'Success!',
             '<label style="color:green;">'+ `<%=msg1.data.data_p1%>` +'</label>',
             'success'
           )
         }
    /*  <% } %> */
  /*  <% } %> */
 </script>

</body>

</html>